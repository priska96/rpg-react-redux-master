/*! For license information please see main.662eb3b3.chunk.js.LICENSE.txt */
(this.webpackJsonpvalentinesdaygame=this.webpackJsonpvalentinesdaygame||[]).push([[0],{16:function(e,t,n){e.exports={mainContainer:"stylesBattle_mainContainer__2wigz",user:"stylesBattle_user__10w-J",opponent:"stylesBattle_opponent__3b7AA",hud:"stylesBattle_hud__1OaKn",hudChild:"stylesBattle_hudChild__3KHiW",gameHeader:"stylesBattle_gameHeader__ILs9c",summary:"stylesBattle_summary__A58qa",characters:"stylesBattle_characters__9rd8M",gameImages:"stylesBattle_gameImages__1yhx4",static:"stylesBattle_static__dgLBk",playerSprite:"stylesBattle_playerSprite__1ovRa",attack:"stylesBattle_attack__1sPdy",opponentSprite:"stylesBattle_opponentSprite__36uwj",magic:"stylesBattle_magic__2lu-X",shake:"stylesBattle_shake__10epJ",damage:"stylesBattle_damage__1LUn0",flash:"stylesBattle_flash__2PWTX"}},22:function(e,t,n){e.exports={gameOverContainer:"stylesApp_gameOverContainer__2Dzdi",gameOver:"stylesApp_gameOver__1tNtA",startGameButtonContainer:"stylesApp_startGameButtonContainer__2nK5N",startGameButton:"stylesApp_startGameButton__bS8B_"}},31:function(e,t,n){e.exports={main:"stylesPlayerSummary_main__2bL6u",info:"stylesPlayerSummary_info__1V1ml",name:"stylesPlayerSummary_name__z1Z-2",level:"stylesPlayerSummary_level__1lLRh",health:"stylesPlayerSummary_health__Egt6x"}},35:function(e,t,n){e.exports={main:"stylesBar_main__2yOKh",label:"stylesBar_label__HzyDD",max:"stylesBar_max__mw_FW",value:"stylesBar_value__27_Q1"}},36:function(e,t,n){e.exports={main:"stylesBattleMenu_main__1y8IQ",option:"stylesBattleMenu_option__3f7G7"}},39:function(e,t,n){e.exports=n.p+"static/media/sky_background.01c9cfab.png"},45:function(e,t,n){e.exports={main:"stylesBattleAnnouncer_main__cViXV",message:"stylesBattleAnnouncer_message__1pVgf"}},50:function(e,t,n){e.exports=n.p+"static/media/jihoon_fight.4be66f58.png"},51:function(e,t,n){e.exports=n.p+"static/media/jihoon_portrait.f0e390ff.png"},53:function(e,t,n){e.exports=n.p+"static/media/blue-dragon_fight.e8fd23c4.png"},54:function(e,t,n){e.exports=n.p+"static/media/evil-king_fight.d51a0382.png"},58:function(e,t,n){e.exports=n.p+"static/media/battle.247af2d3.mp3"},59:function(e,t,n){e.exports=n.p+"static/media/battle2.3c164e83.mp3"},60:function(e,t,n){e.exports=n.p+"static/media/message.5c58ce2c.mp4"},68:function(e,t,n){e.exports=n(82)},76:function(e,t,n){},79:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),s=n(21),c=n.n(s),i=n(17),l=n(8),u=(n(76),n(10)),m=n(5),p=n(50),f=n.n(p),d=n(51),g=n.n(d),h={s:0,a:1,d:2,w:3},v=Object(i.b)({name:"character",initialState:{x:7,y:7,step:0,dir:0,heroClass:"SWORDSMAN",heroImg:null,playerSummary:{level:0,health:20,maxHealth:177,name:"Jihoon",img:f.a,magic:32,attack:50,defense:30,magicDefense:30},portrait:g.a,inventory:[]},reducers:{move:function(e,t){var n=Object(m.a)(t.payload,3),a=n[0],r=n[1],o=n[2];e.x+=a,e.y+=r,e.step=e.step<2?e.step+1:0,e.dir=h[o]},bufferImage:function(e,t){e.heroImg=t.payload},addToInventory:function(e,t){console.log("toinventar"),e.inventory.push(t.payload.item)},updatePlayerPosition:function(e,t){console.log(t.payload),e.x=t.payload.x,e.y=t.payload.y,e.step=t.payload.step,e.dir=t.payload.dir},updatePlayerSummary:function(e,t){e.playerSummary=Object(u.a)(Object(u.a)({},e.playerSummary),t.payload)}}}),y=v.actions,b=y.move,w=y.bufferImage,x=y.addToInventory,j=y.updatePlayerPosition,E=y.updatePlayerSummary,O=v.reducer,_={updatePlayerSummary:E},k=Object(l.b)((function(e){return{character:e.character}}),_)((function(e){var t=e.character,n=e.updatePlayerSummary,a=t.heroClass,r=t.playerSummary,s=t.portrait,c=t.inventory;return o.a.createElement("div",{className:"game-ui"},o.a.createElement("div",{className:"game-ui__avatar"}),o.a.createElement("img",{src:s,alt:"portrait_".concat(r.name)}),o.a.createElement("div",{className:"game-ui__info"},o.a.createElement("p",null,"Name: ",r.name),o.a.createElement("p",null,"Class: ",a),o.a.createElement("p",null,"Level: ",r.level),o.a.createElement("p",null,"Health: ",r.health,"/ ",r.maxHealth),o.a.createElement("p",{className:"game-ui__inventory"},"Inventory:",o.a.createElement("br",null),c.map((function(e,t){return o.a.createElement("span",{key:t},o.a.createElement("span",{className:e.healing>0?"healingItem":"",onClick:function(){if(e.healing>0){var t=r.health+e.healing>r.maxHealth?r.maxHealth:r.health+e.healing;n({health:t})}}},e.item),o.a.createElement("br",null))})))))})),I=n(9),P=o.a.createContext(null),L=17,N=15,S={0:"assets/map/PineTools.com_files/row-1-column-1.png",1:"assets/map/PineTools.com_files/row-1-column-2.png",16:"assets/map/PineTools.com_files/row-1-column-6.png",26:"assets/map/PineTools.com_files/row-2-column-6.png",35:"assets/map/PineTools.com_files/row-3-column-5.png",36:"assets/map/PineTools.com_files/row-3-column-6.png",67:"assets/map/PineTools.com_files/row-6-column-7.png",68:"assets/map/PineTools.com_files/row-6-column-8.png",81:"assets/map/PineTools.com_files/row-8-column-1.png",82:"assets/map/PineTools.com_files/row-8-column-2.png",91:"assets/map/PineTools.com_files/row-9-column-1.png",92:"assets/map/PineTools.com_files/row-9-column-2.png",88:"assets/map/PineTools.com_files/row-8-column-8.png",5:"assets/map/stone_2_brown1.png",25:"assets/map/PineTools.com_files/row-2-column-5.png",104:"assets/map/PineTools.com_files/row-10-column-4.png",114:"assets/map/PineTools.com_files/row-11-column-4.png",63:"assets/map/PineTools.com_files/row-6-column-3.png",15:"assets/map/PineTools.com_files/row-1-column-5.png",131:"assets/map/PineTools.com_files/row-13-column-1.png",132:"assets/map/PineTools.com_files/row-13-column-2.png",1331:"assets/map/PineTools.com_files/row-13-column-3-1.png",1341:"assets/map/PineTools.com_files/row-13-column-4-1.png",1441:"assets/map/PineTools.com_files/row-14-column-4-1.png",1431:"assets/map/PineTools.com_files/row-14-column-3-1.png",141:"assets/map/PineTools.com_files/row-14-column-1.png",142:"assets/map/PineTools.com_files/row-14-column-2.png",110:"assets/map/evil/row-1-column-1.png",420:"assets/map/evil/row-4-column-2.png",310:"assets/map/evil/row-3-column-1.png",320:"assets/map/evil/row-3-column-2.png",330:"assets/map/evil/row-3-column-3.png",340:"assets/map/evil/row-3-column-4.png",350:"assets/map/evil/row-3-column-5.png",410:"assets/map/evil/row-4-column-1.png",430:"assets/map/evil/row-4-column-3.png",440:"assets/map/evil/row-4-column-4.png",450:"assets/map/evil/row-4-column-5.png",510:"assets/map/evil/row-5-column-1.png",520:"assets/map/evil/row-5-column-2.png",530:"assets/map/evil/row-5-column-3.png",610:"assets/map/evil/row-6-column-1.png",620:"assets/map/evil/row-6-column-2.png",630:"assets/map/evil/row-6-column-3.png",710:"assets/map/evil/row-7-column-1.png",720:"assets/map/evil/row-7-column-2.png",730:"assets/map/evil/row-7-column-3.png",1760:"assets/map/evil/row-17-column-6.png",1770:"assets/map/evil/row-17-column-7.png",1780:"assets/map/evil/row-17-column-8.png",1860:"assets/map/evil/row-18-column-6.png",1870:"assets/map/evil/row-18-column-7.png",1880:"assets/map/evil/row-18-column-8.png",1510:"assets/map/evil/row-15-column-1.png",1520:"assets/map/evil/row-15-column-2.png",1530:"assets/map/evil/row-15-column-3.png",1540:"assets/map/evil/row-15-column-4.png",1550:"assets/map/evil/row-15-column-5.png",1610:"assets/map/evil/row-16-column-1.png",1620:"assets/map/evil/row-16-column-2.png",1630:"assets/map/evil/row-16-column-3.png",1640:"assets/map/evil/row-16-column-4.png",1650:"assets/map/evil/row-16-column-5.png",260:"assets/map/evilKing/row-2-column-6.png",3500:"assets/map/evilKing/row-3-column-5.png",4500:"assets/map/evilKing/row-4-column-5.png",390:"assets/map/evilKing/row-3-column-9.png",3100:"assets/map/evilKing/row-3-column-10.png",490:"assets/map/evilKing/row-4-column-9.png",4100:"assets/map/evilKing/row-4-column-10.png",s22:"assets/map/sky/row-2-column-2.png",s47:"assets/map/sky/row-4-column-7.png",s34:"assets/map/sky/row-3-column-4.png",s35:"assets/map/sky/row-3-column-5.png",s36:"assets/map/sky/row-3-column-6.png",s37:"assets/map/sky/row-3-column-7.png",s38:"assets/map/sky/row-3-column-8.png",s44:"assets/map/sky/row-4-column-4.png",s45:"assets/map/sky/row-4-column-5.png",s46:"assets/map/sky/row-4-column-6.png",s48:"assets/map/sky/row-4-column-8.png",s56:"assets/map/sky/row-5-column-6.png",s57:"assets/map/sky/row-5-column-7.png",s58:"assets/map/sky/row-5-column-8.png",s11:"assets/map/sky/row-1-column-1.png",s312:"assets/map/sky/row-3-column-1-2.png",s322:"assets/map/sky/row-3-column-2-2.png",s332:"assets/map/sky/row-3-column-3-2.png",s31:"assets/map/sky/row-3-column-1.png",s32:"assets/map/sky/row-3-column-2.png",s33:"assets/map/sky/row-3-column-3.png",s41:"assets/map/sky/row-4-column-1.png",s43:"assets/map/sky/row-4-column-3.png",s51:"assets/map/sky/row-5-column-1.png",s52:"assets/map/sky/row-5-column-2.png",s53:"assets/map/sky/row-5-column-3.png",s61:"assets/map/sky/row-6-column-1.png",s62:"assets/map/sky/row-6-column-2.png",s63:"assets/map/sky/row-6-column-3.png",s71:"assets/map/sky/row-7-column-1.png",s72:"assets/map/sky/row-7-column-2.png",s73:"assets/map/sky/row-7-column-3.png",s67:"assets/map/sky/row-6-column-7.png",s77:"assets/map/sky/row-7-column-7.png",s121:"assets/map/sky/row-12-column-1.png",s122:"assets/map/sky/row-12-column-2.png",s123:"assets/map/sky/row-12-column-3.png",s131:"assets/map/sky/row-13-column-1.png",s132:"assets/map/sky/row-13-column-2.png",s133:"assets/map/sky/row-13-column-3.png",s141:"assets/map/sky/row-14-column-1.png",s142:"assets/map/sky/row-14-column-2.png",s143:"assets/map/sky/row-14-column-3.png",s151:"assets/map/sky/row-15-column-1.png",s152:"assets/map/sky/row-15-column-2.png",s153:"assets/map/sky/row-15-column-3.png",s161:"assets/map/sky/row-16-column-1.png",s162:"assets/map/sky/row-16-column-2.png",s163:"assets/map/sky/row-16-column-3.png"},C={forest:[[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[16,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,16],[16,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,16],[16,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,16],[16,1,1,1,1,131,132,1,1,1,1,1,1,1,1,1,16],[16,1,1,1,131,15,1341,1,1,1,1,1,1,1,1,1,16],[16,1,1,131,15,15,1341,1,1,1,1,1,1,1,1,1,16],[16,1,1,141,15,15,15,132,1,1,1,1,1,1,1,1,16],[16,1,1,1,141,15,15,15,132,1,1,1,1,1,1,1,16],[16,1,1,1,1,141,1441,1441,142,1,1,1,1,1,1,1,16],[16,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,16],[16,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,16],[16,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,16],[16,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,16],[16,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,16],[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]],[[35,35,35,35,35,35,36,36,36,36,36,36,36,36,36,36,35],[35,35,35,35,35,35,67,68,1,1,1,1,1,1,88,88,35],[35,35,36,36,36,36,68,1,1,1,1,1,1,1,88,1,35],[35,35,1,1,104,1,1,1,1,1,1,1,1,1,1,1,35],[35,36,1,1,1,0,0,1,1,1,1,1,25,1,1,1,35],[35,1,1,1,0,0,0,1,1,1,67,68,68,1,1,1,35],[35,1,1,0,0,0,0,1,1,1,1,1,67,1,1,1,35],[35,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,35],[35,1,1,1,0,0,0,0,0,1,1,1,1,1,25,25,35],[35,1,1,63,1,0,0,0,0,1,1,1,1,67,104,1,35],[35,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,35],[35,1,1,1,1,1,1,1,1,1,1,1,1,81,82,1,35],[35,1,1,67,25,1,1,1,1,1,1,81,82,91,92,1,35],[35,26,1,88,25,104,26,1,1,1,67,91,92,1,1,88,35],[35,35,26,25,68,67,35,26,26,26,26,26,26,81,82,1,35]]],evilKing:[[[420,420,450,520,520,520,520,520,520,520,520,520,520,520,520,520,440],[420,450,530,610,610,610,610,610,610,610,610,610,610,610,610,610,410],[450,530,630,720,720,720,720,720,720,720,720,720,720,720,720,720,410],[430,630,730,110,110,110,110,110,110,110,110,110,110,110,110,110,410],[430,730,110,110,110,110,110,110,110,110,110,110,110,110,110,110,410],[430,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,410],[430,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,410],[430,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,410],[430,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,410],[430,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,410],[430,110,110,110,110,110,410,420,350,110,110,110,110,110,110,110,410],[430,110,110,110,110,110,410,420,420,420,430,110,110,110,110,110,410],[430,110,110,110,110,110,410,420,420,420,430,110,110,110,110,110,410],[350,110,110,110,110,110,110,420,420,420,430,110,110,110,110,110,110],[420,350,110,110,110,110,420,420,420,420,350,110,110,110,110,420,420]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,260,0,0,0,0,0],[0,0,0,0,0,0,0,1760,1770,1780,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1860,1870,1880,0,0,4500,0,0,0,0],[0,0,390,3100,0,0,0,0,0,0,0,0,3500,4500,0,0,0],[0,0,490,4100,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,63,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1510,1520,1520,0,1530,310,320,330,0,0,0,0,0,0,0,0],[0,1610,1620,1620,0,1630,0,0,0,320,330,0,0,0,0,0,0],[0,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,260,0,0,0,4500,0,0,0,0,0,3500,0,0,0,0,0],[0,330,0,0,4500,310,340,0,0,0,0,0,0,3500,0,310,340],[0,0,320,320,320,340,0,0,0,0,0,320,320,320,320,340,0]]],sky:[[[0,0,0,"s41","s11","s11","s11","s43","s63",0,0,0,0,0,0,0,0],[0,0,0,"s51","s52","s52","s52","s53","s63",0,0,0,0,0,0,0,0],[0,0,0,"s61","s62","s62","s62","s63","s63",0,0,0,0,0,0,0,0],[0,0,0,"s61","s62","s62","s62","s63","s63","s22","s22","s22","s22",0,0,0,0],[0,"s22","s36","s61","s62","s62","s62","s63","s63","s22","s22","s22","s22","s22","s22","s22","s22"],[0,"s22","s46","s61","s62","s67","s62","s63","s73","s37","s37","s37","s38","s22","s22","s22","s22"],[0,"s22","s46","s71","s72","s77","s72","s73","s43","s47","s47","s47","s48","s22","s22","s36","s37"],[0,"s22","s46","s47","s11","s11","s11","s11","s11","s47","s47","s45","s58","s22","s36","s47","s47"],[0,"s22","s46","s47","s47","s47","s47","s47","s47","s47","s47","s48","s22","s36","s47","s47","s47"],[0,"s22","s56","s57","s44","s47","s47","s47","s47","s47","s45","s58","s22","s46","s47","s47","s47"],[0,0,0,"s22","s56","s47","s47","s47","s47","s47","s48","s22","s22","s46","s47","s47","s47"],[0,0,0,0,"s22","s46","s47","s47","s47","s47","s48","s22","s22","s46","s47","s47","s47"],[0,0,0,"s22","s36","s45","s44","s47","s47","s47","s48","s22","s22","s46","s47","s47","s47"],[0,0,0,"s22","s56","s58","s56","s57","s57","s57","s58","s22","s22","s46","s47","s47","s47"],[0,0,0,"s22","s22","s22","s22","s22","s22","s22","s22","s22","s36","s34","s47","s47","s47"]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,67,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,67,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,68,0,0,0,0,0,0,0,0],[0,0,0,"s312",88,0,67,0,0,0,0,0,0,0,"s121","s122","s123"],[0,0,0,0,"s312","s322","s322","s322","s332",0,0,0,0,0,"s131","s132","s133"],[0,0,0,0,0,67,0,67,0,0,0,0,0,0,"s141","s142","s143"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,"s151","s152","s153"],[0,0,0,0,0,0,67,0,0,0,0,0,0,0,"s161","s162","s163"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,67,67],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,88,67,67],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,67,68,68]]]},T={w:[0,-1],a:[-1,0],s:[0,1],d:[1,0]},B=[15,25,26,35,36,63,104,114,81,82,91,92,88,131,132,1311,133,1341,134,141,142,1431,143,1441,144,420,310,320,330,410,430,440,510,520,530,610,620,630,1760,1770,1780,1860,1880,1510,1520,1530,1540,1610,1620,1630,1640,260,3500,390,3100,490,4100,"s22","s61","s62","s63","s71","s72","s73","s67","s121","s122","s123","s131","s132","s133","s141","s122","s123","s151","s152","s153","s161","s162","s163"],G=Object(i.b)({name:"gameStatus",initialState:{mapLoaded:!1,characterLoaded:!1,npcLoaded:[!1,!1],objectLoaded:[!1,!1,!1,!1],mode:"start",winner:"Jihoon",selectedOpponentIdx:0,map:"forest",backgroundImg:null,backgroundImgLoaded:!1},reducers:{loadMap:function(e,t){e.mapLoaded=t},loadCharacter:function(e,t){e.characterLoaded=t},loadNPC:function(e,t){var n=Object(I.a)(e.objectLoaded);n[t.payload.idx]=t.payload.val,e.npcLoaded=n},loadObject:function(e,t){var n=Object(I.a)(e.objectLoaded);n[t.payload.idx]=t.payload.val,e.objectLoaded=n},onGameEnd:function(e,t){e.mode=t.payload.mode,e.winner=t.payload.winner,e.selectedOpponentIdx=t.payload.selectedOpponentIdx},changeMap:function(e,t){e.map=t.payload},bufferBackgroundImage:function(e,t){e.backgroundImg=t.payload},loadBackground:function(e,t){e.backgroundImgLoaded=t}}}),M=G.actions,A=M.loadMap,H=M.loadCharacter,F=M.loadNPC,K=M.loadObject,D=M.onGameEnd,R=M.changeMap,V=M.bufferBackgroundImage,W=M.loadBackground,Y=G.reducer,q=n(53),J=n.n(q),z=n(54),X=n.n(z),Q={s:0,a:1,d:2,w:3},U=Object(i.b)({name:"npc",initialState:{npcs:[{id:"npc-0",x:15,y:6,step:0,dir:0,heroClass:"DRAGON",heroImg:null,stopMoving:!1,type:"npc",map:["forest","sky"],dead:!1,npcSummary:{main:!1,name:"Blue Dragon",img:J.a,level:2,health:150,maxHealth:150,magic:42,attack:70,defense:30,magicDefense:30}},{id:"npc-1",x:0,y:0,step:0,dir:0,heroClass:"PUREEVIL",heroImg:null,stopMoving:!1,type:"npc",map:["evilKing"],dead:!1,npcSummary:{main:!1,name:"Evil King",img:X.a,level:10,health:355,maxHealth:355,magic:70,attack:65,defense:40,magicDefense:40}},{id:"npc-2",x:0,y:0,step:0,dir:0,heroClass:"PRINCESS",heroImg:null,stopMoving:!1,type:"npc",map:["evilKing"],dead:!1,npcSummary:{main:!1,name:"Pri",level:2,health:24,maxHealth:244}}]},reducers:{move:function(e,t){var n=Object(m.a)(t.payload,4),a=n[0],r=n[1],o=n[2],s=n[3];e.npcs[s].x+=a,e.npcs[s].y+=r,e.npcs[s].step=e.npcs[s].step<2?e.npcs[s].step+1:0,e.npcs[s].dir=Q[o]},bufferImage:function(e,t){e.npcs[t.payload.idx].heroImg=t.payload.heroImg},fireAction:function(e,t){e.npcs[t.payload.idx].stopMoving=!e.npcs[t.payload.idx].stopMoving},updateNPC:function(e,t){t.payload.idx.forEach((function(n){e.npcs[n]=Object(u.a)(Object(u.a)({},e.npcs[n]),t.payload["data-".concat(n)])}))}}}),Z=U.actions,$=Z.move,ee=Z.bufferImage,te=Z.fireAction,ne=Z.updateNPC,ae=U.reducer,re=Object(i.b)({name:"objectNPC",initialState:{objects:[{id:"object-0",x:12,y:8,item:"Armor",objectImg:null,type:"objectNPC",map:["forest"],tookItem:!1,healing:0},{id:"object-1",x:15,y:2,item:"Boots",objectImg:null,type:"objectNPC",map:["forest"],tookItem:!1,healing:0},{id:"object-2",x:1,y:5,item:"Apples",objectImg:null,type:"objectNPC",map:["forest"],tookItem:!1,healing:20},{id:"object-3",x:2,y:3,item:"Fish",objectImg:null,type:"objectNPC",map:["forest"],tookItem:!1,healing:30},{id:"object-4",x:2,y:13,item:"Sword",objectImg:null,type:"objectNPC",map:["forest"],tookItem:!1,healing:0},{id:"object-5",x:0,y:0,item:"doorOpenTop",objectImg:null,type:"objectNPC",map:["evilKing"],tookItem:!1,healing:0},{id:"object-6",x:0,y:0,item:"doorOpenBottom",objectImg:null,type:"objectNPC",map:["evilKing"],tookItem:!1,healing:0}]},reducers:{fireAction:function(e,t){e.objects[t.payload.idx].tookItem=!0},bufferImage:function(e,t){e.objects[t.payload.idx].objectImg=t.payload.objectImg},updateObject:function(e,t){t.payload.idx.forEach((function(n){e.objects[n]=Object(u.a)(Object(u.a)({},e.objects[n]),t.payload["data-".concat(n)])}))}}}),oe=re.actions,se=oe.fireAction,ce=oe.bufferImage,ie=oe.updateObject,le=re.reducer,ue=Object(i.b)({name:"dialog",initialState:{open:!1,title:"",text:"",openerId:"",action:""},reducers:{setContents:function(e,t){e.open=t.payload.open,e.title=t.payload.title,e.text=t.payload.text,e.openerId=t.payload.openerId,e.action=t.payload.action}}}),me=ue.actions.setContents,pe=ue.reducer,fe=n(55),de=function(e,t,n,a){return function(e,t){return e<0||e>=L||t<0||t>=N}(e,t)||function(e,t,n){var a,r=C[n],o=Object(fe.a)(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(B.includes(s[t][e]))return!0}}catch(c){o.e(c)}finally{o.f()}return!1}(e,t,a)||function(e,t,n){var a=!1;return n.forEach((function(n){n.x===e&&n.y===t&&(a=!0)})),a}(e,t,n)},ge=function(e){var t=0;return e.forEach((function(e){"Armor"!==e.item&&"Boots"!==e.item&&"Sword"!==e.item||(t+=1)})),t},he={forest:{"npc-0":{beforeFight:{beforeGear:{content:{open:!0,title:"Blue Dragon",text:"Hi, oh mighty hero! Help us free our land and rescue princess Pri~~\n But fist you should find some armor and practice the sword fighting. \nCome back when you found your gear so we can train!",openerId:"npc-0",action:""}},afterGear:{content:{open:!0,title:"Blue Dragon",text:"Let's train!",openerId:"npc-0",action:""}}},afterFight:{won:{content:{open:!0,title:"Blue Dragon",text:"You are a true swordsman! I believe you are ready to fight the evil King and rescue the princess! Let me know when you want to leave.",openerId:"npc-0",action:""}},lost:{content:{open:!0,title:"Blue Dragon",text:"Let's try another round when you are ready!",openerId:"npc-0",action:""}},goToSky:{content:{open:!0,title:"Blue Dragon",text:"You are ready? Great! The Evil King holds the princess capture in the sky dungeon. I will bring us there now.",openerId:"npc-0",action:"go-to-sky"}}}}},sky:{"npc-0":{enterDungeon:{content:{open:!0,title:"Blue Dragon",text:"Are you ready to enter the dungeon?\n Then go and rescue the princess! I will wait here for you.",openerId:"npc-0",action:"enter-dungeon"}},leftDungeon:{content:{open:!0,title:"Blue Dragon",text:"Hero Jihoon you did it!! Thank you for saving us!",openerId:"npc-0",action:"game-won"}}}},evilKing:{"npc-1":{beforeFight:{content:{open:!0,title:"Evil King",text:"Who dares to enter my dungeon!? You weakling! Come here I will teach you a lesson!",openerId:"npc-1",action:"battle-evil-king"}},afterFight:{lost:{content:{open:!0,title:"Evil King",text:"That was really too easy!",openerId:"npc-1",action:"game-over"}},won:{content:{open:!0,title:"Evil King",text:"That's impossible!!",openerId:"npc-1",action:"victory"}}},afterVictory:{content:{open:!0,title:"Evil King",text:".....",openerId:"npc-1",action:""}}},"npc-2":{afterVictory:{content:{open:!0,title:"Princess Priska",text:"Thank you my hero for defeating the Evil King. Now let's get out of here!~",openerId:"npc-2",action:"leave-dungeon"}}}}},ve={move:b,moveNPC:$,addToInventory:x,fireAction:te,setContents:me,fireActionObject:se,onGameEnd:D,changeMap:R,updateNPC:ne,updatePlayerPosition:j,updateObject:ie},ye=Object(l.b)((function(e){var t=e.character,n=e.npc,a=e.objectNPC,r=e.dialog,o=e.gameStatus;return{character:t,npc:n,objectNPC:a,dialog:r,map:o.map,winner:o.winner}}),ve)((function(e){var t=e.children,n=e.character,a=e.npc,s=e.move,c=e.moveNPC,i=e.objectNPC,l=e.fireAction,u=e.dialog,p=e.setContents,f=e.map,d=e.winner,g=e.fireActionObject,h=e.addToInventory,v=e.onGameEnd,y=e.changeMap,b=e.updateNPC,w=e.updatePlayerPosition,x=e.updateObject,j=Object(r.useRef)(null),E=Object(r.useState)(null),O=Object(m.a)(E,2),_=O[0],k=O[1],S=Object(r.useState)(!0),C=Object(m.a)(S,2),B=C[0],G=C[1],M=Object(r.useState)(!1),A=Object(m.a)(M,2),H=A[0],F=A[1],K=["w","s","a","d"],D=Object(r.useRef)(),R=32*L,V=32*N,W=Object(r.useCallback)((function(e){var t=e.key;if(e.preventDefault(),T[t]){var r=Object(m.a)(T[t],2),o=r[0],c=r[1];!1===de(n.x+o,n.y+c,[].concat(Object(I.a)(a.npcs),Object(I.a)(i.objects)),f)&&(F(!0),s([o,c,t]))}"Enter"===t&&(u.open?z():X()),"m"===t&&(y("sky"),b({idx:[2,1],"data-1":{x:8,y:3,stopMoving:!0},"data-2":{x:3,y:13}}))}),[s,n.x,n.y,n.step,n.dir,u.open]),Y=Object(r.useCallback)((function(){H&&(G(!1),G(!0),F(!1)),D.current=requestAnimationFrame(Y)}),[H,G,F]);Object(r.useEffect)((function(){k(j.current.getContext("2d"))}),[k]),Object(r.useEffect)((function(){return D.current=requestAnimationFrame(Y),function(){D.current&&cancelAnimationFrame(D.current)}}),[D,Y]);var q=function(e,t){var r=a.npcs[t];if(!r.stopMoving&&T[e]){var o=Object(m.a)(T[e],2),s=o[0],l=o[1];!1===de(r.x+s,r.y+l,[n].concat(Object(I.a)(i.objects),Object(I.a)(a.npcs.filter((function(e){return e!==r})))),f)&&(F(!0),c([s,l,e,t]))}},J=function(e){return e[Math.floor(Math.random()*e.length)]};Object(r.useEffect)((function(){var e=setInterval((function(){q(J(K),0)}),1500);return function(){return clearInterval(e)}}),[a.npcs[0].x,a.npcs[0].y,a.npcs[0].stopMoving]),Object(r.useEffect)((function(){if("evilKing"===f){var e=setInterval((function(){q(J(K),1)}),1500);return function(){return clearInterval(e)}}}),[a.npcs[1].x,a.npcs[1].y,a.npcs[1].stopMoving,f]),Object(r.useEffect)((function(){if("evilKing"===f){var e=setInterval((function(){q(J(K),2)}),1500);return function(){return clearInterval(e)}}}),[a.npcs[2].x,a.npcs[2].y,a.npcs[2].stopMoving,f]);var z=function(){console.log("finish action");var e=u.openerId,t=parseInt(e.split("-")[1]);if(!function(e,t,n,a,r,o,s,c,i){return"enter-dungeon"===n&&(a({open:!1,title:"",text:"",openerId:"",action:""}),r(!0),o("evilKing"),i({idx:[5,6],"data-5":{x:4,y:9},"data-6":{x:4,y:10}}),r(!0),s({x:7,y:8,step:0,dir:3}),c({idx:[2,1],"data-1":{x:8,y:3,stopMoving:!0},"data-2":{x:3,y:13}}),r(!0),setTimeout((function(){a(he.evilKing["npc-1"].beforeFight.content)}),200),!0)}(0,0,u.action,p,F,y,w,b,x)&&!function(e,t,n,a,r,o){return"go-to-sky"===e&&(t({open:!1,title:"",text:"",openerId:"",action:""}),n(!0),a("sky"),n(!0),r({x:7,y:12,step:0,dir:3}),o({idx:[0],"data-0":{x:8,y:12,step:0,dir:3,stopMoving:!0}}),n(!0),!0)}(u.action,p,F,y,w,b)&&!function(e,t,n,a){return"battle-evil-king"===e&&(n({open:!1,title:"",text:"",openerId:"",action:""}),console.log(t),a({mode:"battle",winner:void 0,selectedOpponentIdx:t}),!0)}(u.action,t,p,v)&&!function(e,t,n,a){return"game-over"===e&&(n({open:!1,title:"",text:"",openerId:"",action:""}),console.log(t),a({mode:"game-over",winner:"Evil King",selectedOpponentIdx:t}),!0)}(u.action,t,p,v)&&!function(e,t,n,a,r,o){return"victory"===e&&(n({open:!1,title:"",text:"",openerId:"",action:""}),r({idx:5}),r({idx:6}),a(!0),o({idx:[2,1],"data-2":{x:4,y:8},"data-1":{dead:!0,stopMoving:!0}}),a(!0),!0)}(u.action,0,p,F,g,b)&&!function(e,t,n,a,r,o,s,c){return"leave-dungeon"===n&&(a({open:!1,title:"",text:"",openerId:"",action:""}),r(!0),o("sky"),c({idx:[2],"data-2":{x:6,y:7,step:0,dir:0,map:["sky","evilKing"]}}),r(!0),s({x:5,y:7,step:0,dir:0}),r(!0),setTimeout((function(){a(he.sky["npc-0"].leftDungeon.content)}),1e3),!0)}(0,0,u.action,p,F,y,w,b)&&!function(e,t,n,a){return"game-won"===e&&(n({open:!1,title:"",text:"",openerId:"",action:""}),console.log(t),a({mode:"game-won",winner:"Jihoon",selectedOpponentIdx:t}),!0)}(u.action,t,p,v))if(e.startsWith("npc-")&&a.npcs[t].stopMoving)p({open:!1,title:"",text:"",openerId:"",action:""}),l({idx:t});else if(e.startsWith("object-")){F(!0);var n=u.title;p({open:!1,title:"",text:"",openerId:"",action:""}),g({idx:t}),"Nothing!"!==n&&h({item:i.objects[t]})}else p({open:!1,title:"",text:"",openerId:"",action:""})},X=function(){console.log("action"),"sky"===f&&5===n.x&&6===n.y&&p(he.sky["npc-0"].enterDungeon.content);var e=function(e,t,n){var a=void 0;return n.forEach((function(n){"objectNPC"!==n.type&&"npc"!==n.type||(n.x===e&&n.y===t-1||n.x===e-1&&n.y===t||n.x===e&&n.y===t+1||n.x===e+1&&n.y===t)&&(a=n)})),a}(n.x,n.y,[].concat(Object(I.a)(a.npcs),Object(I.a)(i.objects)));if(console.log(e),e){if("npc"===e.type){var t=parseInt(e.id.split("-")[1]);l({idx:t}),"forest"===f&&(3===ge(n.inventory)?(void 0!==d&&"Blue Dragon"!==d||(p(he.forest[e.id].beforeFight.afterGear.content),setTimeout((function(){v({mode:"battle",winner:void 0,selectedOpponentIdx:t})}),500)),"Jihoon"===d&&p(he.forest[e.id].afterFight.goToSky.content)):p(he.forest[e.id].beforeFight.beforeGear.content)),"evilKing"===f&&p(he.evilKing[e.id].afterVictory.content)}"objectNPC"===e.type&&(e.tookItem?p({open:!0,title:"Nothing!",text:"Here is nothing to take from.",openerId:e.id,action:""}):p({open:!0,title:"Item found!",text:"You found ".concat(e.item,"!"),openerId:e.id,action:""}))}};return Object(r.useEffect)((function(){return document.addEventListener("keypress",W),function(){document.removeEventListener("keypress",W)}}),[W]),o.a.createElement(P.Provider,{value:_},o.a.createElement("canvas",{style:{zIndex:1},ref:j,width:R,height:V,id:"playerCanvas"}),B&&t)})),be=function(e){var t=e.width,n=e.height,a=e.children,o=Object(r.useContext)(P);return Object(r.useEffect)((function(){for(var e=0;e<n;e++){var a=32*e;o.beginPath(),o.moveTo(0,a),o.lineTo(t,a),o.stroke(),o.closePath()}for(var r=0;r<t;r++){var s=32*r;o.beginPath(),o.moveTo(s,0),o.lineTo(s,n),o.stroke(),o.closePath()}}),[o,n,t]),a},we=Object(i.b)({name:"images",initialState:{},reducers:{bufferImage:function(e,t){var n=t.payload;n&&(e[n]=1)}}}),xe=we.actions.bufferImage,je=we.reducer,Ee={bufferImage:xe},Oe=Object(l.b)(null,Ee)((function(e){var t=e.bufferImage;return o.a.createElement("div",{className:"images-buffer"},Object.keys(S).map((function(e){return o.a.createElement("img",{key:"map-tile-img-".concat(e),id:"map-tile-img-".concat(e),src:"".concat(S[e]),alt:"map-tile-".concat(e),onLoad:function(){t(S[e])}})})))})),_e={loadMap:A},ke=Object(l.b)((function(e){return{map:e.gameStatus.map}}),_e)((function(e){var t=e.loadMap,n=e.map,a=Object(r.useContext)(P),o=L,s=N;return Object(r.useEffect)((function(){console.log("map effect");var e=function(e){for(var t=0;t<s;t++)for(var n=0;n<o;n++){var r=e[t][n];if(r){var c=document.querySelector("#map-tile-img-".concat(r)),i=32*n,l=32*t;a.drawImage(c,0,0,32,32,i,l,32,32)}}};e(C[n][0]),e(C[n][1]),t(!0)}),[o,s,a,t,n]),null})),Ie={"npc-0":48,"npc-1":32,"npc-2":32,"npc-3":32},Pe={"npc-0":"assets/heroes/blue-dragon.png","npc-1":"assets/heroes/evil-king.png","npc-2":"assets/heroes/priska.png","npc-3":"assets/heroes/blue-dragon.png"},Le={"object-0":["assets/map/PineTools.com_files/row-6-column-1.png","assets/map/PineTools.com_files/row-6-column-3.png"],"object-1":["assets/map/PineTools.com_files/row-6-column-1.png","assets/map/PineTools.com_files/row-6-column-3.png"],"object-2":["assets/map/PineTools.com_files/row-11-column-7.png","assets/map/PineTools.com_files/row-11-column-6.png"],"object-3":["assets/map/PineTools.com_files/row-12-column-6.png","assets/map/PineTools.com_files/row-11-column-6.png"],"object-4":["assets/map/PineTools.com_files/row-6-column-1.png","assets/map/PineTools.com_files/row-6-column-3.png"],"object-5":["assets/map/evil/row-15-column-4.png","assets/map/evil/row-15-column-5.png"],"object-6":["assets/map/evil/row-16-column-4.png","assets/map/evil/row-16-column-5.png"]},Ne={loadCharacter:H,bufferImage:w},Se=Object(l.b)((function(e){return Object(u.a)({},e.character)}),Ne)((function(e){var t=e.x,n=e.y,a=e.step,s=void 0===a?0:a,c=e.dir,i=void 0===c?0:c,l=e.heroClass,u=e.heroImg,m=e.inventory,p=e.loadCharacter,f=e.bufferImage,d=Object(r.useContext)(P),g=Object(r.useRef)(null),h=3===ge(m)?"assets/heroes/jihoon.png":"assets/heroes/jihoon_naked.png";return Object(r.useEffect)((function(){return u&&(d.drawImage(document.querySelector(u),32*s,32*i,32,32,32*t,32*n,32,32),p(!0)),function(){}}),[d,l,u,t,n,s,i,p,m]),o.a.createElement("img",{id:"character",alt:"character",ref:g,onLoad:function(){return f("#".concat(g.current.id))},className:"images-buffer",src:h})})),Ce={bufferImage:ee,loadNPC:F},Te=Object(l.b)((function(e){return Object(u.a)(Object(u.a)({},e.npc),{},{currentMap:e.gameStatus.map})}),Ce)((function(e){return o.a.createElement(o.a.Fragment,null,e.npcs.map((function(t,n){return function(e){var t=e.id,n=e.x,a=e.y,s=e.step,c=void 0===s?0:s,i=e.dir,l=void 0===i?0:i,u=e.heroImg,m=e.dead,p=e.idx,f=e.loadNPC,d=e.bufferImage,g=e.map,h=e.currentMap,v=Object(r.useContext)(P),y=Object(r.useRef)(null),b=Ie[t];return Object(r.useEffect)((function(){return u&&g.includes(h)&&(v.drawImage(document.querySelector(u),c*b,l*b,b,b,32*n,32*a,b,b),f({idx:p,val:!0})),function(){}}),[v,u,n,a,c,l,f,h]),o.a.createElement("img",{key:t,id:t,alt:"npc",ref:y,onLoad:function(){d({idx:p,heroImg:"#".concat(y.current.id)})},className:"images-buffer",src:m?"assets/heroes/evil-king_dead.png":Pe[t]})}(Object(u.a)(Object(u.a)({},t),{},{idx:n,currentMap:e.currentMap,bufferImage:e.bufferImage,loadNPC:e.loadNPC}))})))})),Be={loadObject:K,bufferImage:ce},Ge=Object(l.b)((function(e){return Object(u.a)(Object(u.a)({},e.objectNPC),{},{currentMap:e.gameStatus.map})}),Be)((function(e){return o.a.createElement("div",null,e.objects.map((function(t,n){return function(e){var t=e.id,n=e.x,a=e.y,s=e.objectImg,c=e.map,i=e.idx,l=e.loadObject,u=e.bufferImage,m=e.tookItem,p=e.currentMap,f=Object(r.useContext)(P),d=Object(r.useRef)(null);return Object(r.useEffect)((function(){return s&&c.includes(p)&&(f.drawImage(document.querySelector(s),0,0,32,32,32*n,32*a,32,32),l({idx:i,val:!0})),function(){}}),[f,l,m,p]),o.a.createElement("img",{key:t,id:t,alt:"objectNPC",ref:d,onLoad:function(){u({idx:i,objectImg:"#".concat(d.current.id)})},className:"images-buffer",src:m?Le[t][1]:Le[t][0]})}(Object(u.a)(Object(u.a)({},t),{},{idx:n,bufferImage:e.bufferImage,loadObject:e.loadObject,currentMap:e.currentMap}))})))})),Me=n(39),Ae=n.n(Me),He={bufferBackgroundImage:V},Fe=Object(l.b)((function(e){return{backgroundImg:e.gameStatus.backgroundImg}}),He)((function(e){var t=e.backgroundImg,n=e.bufferBackgroundImage,a=Object(r.useContext)(P),s=Object(r.useRef)(null);return Object(r.useEffect)((function(){console.log("background"),t&&a.drawImage(document.querySelector(t),0,0),W(!0)}),[a,t]),o.a.createElement("img",{id:"skybackground",src:Ae.a,alt:"background",ref:s,className:"images-buffer",onLoad:function(){n("#".concat(s.current.id))}})})),Ke=Object(l.b)((function(e){return{mapImagesLoaded:e.mapImagesLoaded,gameStatus:e.gameStatus}}))((function(e){var t=e.mapImagesLoaded,n=e.gameStatus,a=32*L,s=32*N,c=Object(r.useContext)(P);return Object(r.useEffect)((function(){return function(){return function(){c&&c.clearRect(0,0,c.width,c.height)}}}),[c,n.map]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Fe,null),o.a.createElement(Oe,null),Object.keys(t).length===Object.keys(S).length&&o.a.createElement(o.a.Fragment,null,o.a.createElement(be,{width:a,height:s},o.a.createElement(ke,null))),n.mapLoaded&&o.a.createElement(Ge,null),n.mapLoaded&&o.a.createElement(Te,null),n.mapLoaded&&o.a.createElement(Se,null))})),De=(n(79),n(22)),Re=n.n(De),Ve=n(56),We=n(111),Ye=n(107),qe=n(110),Je=n(13),ze=Object(Je.a)(Ye.a)(a||(a=Object(Ve.a)(["\n\t& .MuiDialog-container .MuiPaper-root.MuiDialog-paper {\n\t    background-color: rgba(19, 28, 106, 0.6);\n\t    & h2, p{\n\t        color: white;\n\t    }\n\t    & p{\n\t        font-size: 1.5em;\n\t        padding: 12px;\n\t    }\n\t}\n"])));var Xe=Object(l.b)((function(e){return{dialog:e.dialog}}))((function(e){var t=e.dialog,n=t.open,a=t.title,o=t.text,s=t.action;return r.createElement(ze,{open:n,fullWidth:!0},r.createElement(We.a,null,a),"video"===s?r.createElement("video",{height:"400",controls:!0},r.createElement("source",{src:o,type:"video/mp4"})):r.createElement(qe.a,null,o))})),Qe=n(25),Ue=function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},Ze=n(16),$e=n.n(Ze),et=n(31),tt=n.n(et),nt=n(35),at=n.n(nt),rt=function(e){var t=e.value,n=e.maxValue,a=e.label;return o.a.createElement("div",{className:at.a.main},o.a.createElement("div",{className:at.a.label},a),o.a.createElement("div",{className:at.a.max},o.a.createElement("div",{className:at.a.value,style:{width:"".concat(t/n*100,"%")}})))},ot=function(e){e.main;var t=e.name,n=e.level,a=e.health,r=e.maxHealth;return o.a.createElement("div",{className:tt.a.main,style:{backgroundColor:"wheat"}},o.a.createElement("div",{className:tt.a.info},o.a.createElement("div",{className:tt.a.name},t),o.a.createElement("div",{className:tt.a.level},"Lvl ",n)),o.a.createElement("div",{className:tt.a.health},o.a.createElement(rt,{label:"HP",value:a,maxValue:r})))};function st(){st=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(P){i=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),c=new _(r||[]);return a(s,"_invoke",{value:x(e,n,c)}),s}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var m={};function p(){}function f(){}function d(){}var g={};i(g,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==t&&n.call(v,o)&&(g=v);var y=d.prototype=p.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;a(this,"_invoke",{value:function(a,o){function s(){return new t((function(r,s){!function a(r,o,s,c){var i=u(e[r],e,o);if("throw"!==i.type){var l=i.arg,m=l.value;return m&&"object"==typeof m&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){a("next",e,s,c)}),(function(e){a("throw",e,s,c)})):t.resolve(m).then((function(e){l.value=e,s(l)}),(function(e){return a("throw",e,s,c)}))}c(i.arg)}(a,o,r,s)}))}return r=r?r.then(s,s):s()}})}function x(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var c=j(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var i=u(e,t,n);if("normal"===i.type){if(a=n.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a="completed",n.method="throw",n.arg=i.arg)}}}function j(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=d,a(y,"constructor",{value:d,configurable:!0}),a(d,"constructor",{value:f,configurable:!0}),f.displayName=i(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),i(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var s=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),i=n.call(o,"finallyLoc");if(c&&i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}function ct(){ct=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(P){i=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),c=new _(r||[]);return a(s,"_invoke",{value:x(e,n,c)}),s}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var m={};function p(){}function f(){}function d(){}var g={};i(g,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==t&&n.call(v,o)&&(g=v);var y=d.prototype=p.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;a(this,"_invoke",{value:function(a,o){function s(){return new t((function(r,s){!function a(r,o,s,c){var i=u(e[r],e,o);if("throw"!==i.type){var l=i.arg,m=l.value;return m&&"object"==typeof m&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){a("next",e,s,c)}),(function(e){a("throw",e,s,c)})):t.resolve(m).then((function(e){l.value=e,s(l)}),(function(e){return a("throw",e,s,c)}))}c(i.arg)}(a,o,r,s)}))}return r=r?r.then(s,s):s()}})}function x(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var c=j(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var i=u(e,t,n);if("normal"===i.type){if(a=n.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a="completed",n.method="throw",n.arg=i.arg)}}}function j(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=d,a(y,"constructor",{value:d,configurable:!0}),a(d,"constructor",{value:f,configurable:!0}),f.displayName=i(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),i(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var s=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),i=n.call(o,"finallyLoc");if(c&&i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}var it=n(36),lt=n.n(it),ut=function(e){var t=e.onAttack,n=e.onMagic,a=e.onHeal;return o.a.createElement("div",{className:lt.a.main},o.a.createElement("div",{onClick:t,className:lt.a.option},"Attack"),o.a.createElement("div",{onClick:n,className:lt.a.option},"Magic"),o.a.createElement("div",{onClick:a,className:lt.a.option},"Heal"))},mt=n(45),pt=n.n(mt),ft=function(e){var t=function(e){var t=Object(r.useState)(""),n=Object(m.a)(t,2),a=n[0],o=n[1];return Object(r.useEffect)((function(){return o(""),e.length&&Object(Qe.a)(st().mark((function t(){var n,a;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n="",a=0;case 2:if(!(a<e.length)){t.next=10;break}return t.next=5,Ue(25);case 5:n+=e[a],o(n);case 7:a++,t.next=2;break;case 10:case"end":return t.stop()}}),t)})))(),function(){}}),[e]),a}(e.message);return o.a.createElement("div",{className:pt.a.main},o.a.createElement("div",{className:pt.a.message},t))},dt=n(58),gt=n.n(dt),ht=n(59),vt=n.n(ht);function yt(){yt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(P){i=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),c=new _(r||[]);return a(s,"_invoke",{value:x(e,n,c)}),s}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var m={};function p(){}function f(){}function d(){}var g={};i(g,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==t&&n.call(v,o)&&(g=v);var y=d.prototype=p.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;a(this,"_invoke",{value:function(a,o){function s(){return new t((function(r,s){!function a(r,o,s,c){var i=u(e[r],e,o);if("throw"!==i.type){var l=i.arg,m=l.value;return m&&"object"==typeof m&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){a("next",e,s,c)}),(function(e){a("throw",e,s,c)})):t.resolve(m).then((function(e){l.value=e,s(l)}),(function(e){return a("throw",e,s,c)}))}c(i.arg)}(a,o,r,s)}))}return r=r?r.then(s,s):s()}})}function x(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var c=j(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var i=u(e,t,n);if("normal"===i.type){if(a=n.done?"completed":"suspendedYield",i.arg===m)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a="completed",n.method="throw",n.arg=i.arg)}}}function j(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=d,a(y,"constructor",{value:d,configurable:!0}),a(d,"constructor",{value:f,configurable:!0}),f.displayName=i(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),i(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var s=new w(l(t,n,a,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),i=n.call(o,"finallyLoc");if(c&&i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}var bt={onGameEnd:D,setContents:me,updatePlayerSummary:E},wt=Object(l.b)((function(e){return{character:Object(u.a)({},e.character),npcs:Object(I.a)(e.npc.npcs),selectedOpponentIdx:e.gameStatus.selectedOpponentIdx}}),bt)((function(e){var t=e.character,n=e.npcs,a=e.selectedOpponentIdx,s=e.onGameEnd,c=e.setContents,i=e.updatePlayerSummary,l=Object(r.useState)({}),u=Object(m.a)(l,2),p=u[0],f=u[1],d=t.playerSummary,g=n[a].npcSummary,h=function(e,t,n){var a=Object(r.useState)(0),o=Object(m.a)(a,2),s=o[0],c=o[1],i=Object(r.useState)(!1),l=Object(m.a)(i,2),u=l[0],p=l[1],f=Object(r.useState)(t.maxHealth),d=Object(m.a)(f,2),g=d[0],h=d[1],v=Object(r.useState)(n.maxHealth),y=Object(m.a)(v,2),b=y[0],w=y[1],x=Object(r.useState)(""),j=Object(m.a)(x,2),E=j[0],O=j[1],_=Object(r.useState)("static"),k=Object(m.a)(_,2),I=k[0],P=k[1],L=Object(r.useState)("static"),N=Object(m.a)(L,2),S=N[0],C=N[1];return Object(r.useEffect)((function(){var a=e.mode,r=e.turn;if(a){var o=0===r?t:n,s=0===r?n:t;switch(a){case"attack":var i=function(e){var t=e.attacker,n=e.receiver;return t.attack-1.25*(t.level-n.level)-n.defense/2}({attacker:o,receiver:s});Object(Qe.a)(ct().mark((function e(){return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),O("".concat(o.name," has chosen to attack!")),e.next=4,Ue(1e3);case 4:return 0===r?P("attack"):C("attack"),e.next=7,Ue(100);case 7:return 0===r?P("static"):C("static"),e.next=10,Ue(500);case 10:return 0===r?C("damage"):P("damage"),e.next=13,Ue(750);case 13:return 0===r?C("static"):P("static"),O("".concat(s.name," felt that!")),0===r?w((function(e){return e-i>0?e-i:0})):h((function(e){return e-i>0?e-i:0})),e.next=18,Ue(2e3);case 18:return O("Now it's ".concat(s.name,"'s turn!")),e.next=21,Ue(1500);case 21:c(0===r?1:0),p(!1);case 23:case"end":return e.stop()}}),e)})))();break;case"magic":var l=function(e){var t=e.attacker,n=e.receiver;return t.magic-1.25*(t.level-n.level)-n.magicDefense/2}({attacker:o,receiver:s});Object(Qe.a)(ct().mark((function e(){return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),O("".concat(o.name," has cast a spell!")),e.next=4,Ue(1e3);case 4:return 0===r?P("magic"):C("magic"),e.next=7,Ue(1e3);case 7:return 0===r?P("static"):C("static"),e.next=10,Ue(500);case 10:return 0===r?C("damage"):P("damage"),e.next=13,Ue(750);case 13:return 0===r?C("static"):P("static"),O("".concat(s.name," doesn't know what hit him!")),0===r?w((function(e){return e-l>0?e-l:0})):h((function(e){return e-l>0?e-l:0})),e.next=18,Ue(2500);case 18:return O("Now it's ".concat(s.name,"'s turn!")),e.next=21,Ue(1500);case 21:c(0===r?1:0),p(!1);case 23:case"end":return e.stop()}}),e)})))();break;case"heal":var u=function(e){var t=e.receiver;return t.magic+.25*t.level}({receiver:o});Object(Qe.a)(ct().mark((function e(){return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),O("".concat(o.name," has chosen to heal!")),e.next=4,Ue(1e3);case 4:return 0===r?P("magic"):C("magic"),e.next=7,Ue(1e3);case 7:return 0===r?P("static"):C("static"),e.next=10,Ue(500);case 10:return O("".concat(o.name," has recovered health.")),0===r?h((function(e){return e+u<=o.maxHealth?e+u:o.maxHealth})):w((function(e){return e+u<=o.maxHealth?e+u:o.maxHealth})),e.next=14,Ue(2500);case 14:return O("Now it's ".concat(s.name,"'s turn!")),e.next=17,Ue(1500);case 17:c(0===r?1:0),p(!1);case 19:case"end":return e.stop()}}),e)})))()}}return function(){}}),[e]),{turn:s,inSequence:u,playerHealth:g,opponentHealth:b,playerAnimation:I,opponentAnimation:S,announcerMessage:E}}(p,d,g),v=h.turn,y=h.inSequence,b=h.playerHealth,w=h.opponentHealth,x=h.playerAnimation,j=h.opponentAnimation,E=h.announcerMessage,O=function(e){var t=Object(r.useState)(""),n=Object(m.a)(t,2),a=n[0],o=n[1];return Object(r.useEffect)((function(){if(1===e){var t=["attack","magic","heal"];o(t[Math.floor(Math.random()*t.length)])}return function(){}}),[e]),a}(v);return Object(r.useEffect)((function(){return O&&1===v&&!y&&f({turn:v,mode:O}),function(){f({})}}),[v,O,y]),Object(r.useEffect)((function(){return 0!==b&&0!==w||(Object(Qe.a)(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(1e3);case 2:s(0===b?{mode:"world",winner:g.name}:{mode:"world",winner:d.name});case 3:case"end":return e.stop()}}),e)})))(),0===w&&("Blue Dragon"===g.name&&(i({level:3,health:b,maxHealth:250,attack:70,magic:55,defense:45,magicDefense:35}),setTimeout((function(){c(he.forest["npc-0"].afterFight.won.content)}),500)),"Evil King"===g.name&&(i({level:12,health:b,maxHealth:450,attack:100,magic:75,defense:55,magicDefense:55}),setTimeout((function(){c(he.evilKing["npc-1"].afterFight.won.content)}),500))),0===b&&("Blue Dragon"===g.name?c(he.forest["npc-0"].afterFight.lost.content):"Evil King"===g.name&&c(he.evilKing["npc-1"].afterFight.lost.content),i({health:b}))),function(){f({})}}),[b,w,s]),o.a.createElement("div",{className:$e.a.mainContainer},"Blue Dragon"===g.name?o.a.createElement("audio",{id:"audio",loop:!0,autoPlay:!0},o.a.createElement("source",{src:vt.a,type:"audio/mp3"})):o.a.createElement("audio",{id:"audio",loop:!0,autoPlay:!0},o.a.createElement("source",{src:gt.a,type:"audio/mp3"})),o.a.createElement("div",{className:$e.a.gameHeader},d.name," vs ",g.name),o.a.createElement("div",{className:$e.a.opponent},o.a.createElement("div",{className:$e.a.summary},o.a.createElement(ot,{main:!1,health:w,name:g.name,level:g.level,maxHealth:g.maxHealth}))),o.a.createElement("div",{className:$e.a.characters},o.a.createElement("div",{className:$e.a.gameImages},o.a.createElement("div",{className:$e.a.playerSprite},o.a.createElement("img",{alt:d.name,src:d.img,className:$e.a[x]})),o.a.createElement("div",{className:$e.a.opponentSprite},o.a.createElement("img",{alt:g.name,src:g.img,className:$e.a[j]})))),o.a.createElement("div",{className:$e.a.user},o.a.createElement("div",{className:$e.a.summary},o.a.createElement(ot,{main:!0,health:b,name:d.name,level:d.level,maxHealth:d.maxHealth})),o.a.createElement("div",{className:$e.a.hud},o.a.createElement("div",{className:$e.a.hudChild},o.a.createElement(ft,{message:E||"What will ".concat(d.name," do?")})),!y&&0===v&&o.a.createElement("div",{className:$e.a.hudChild},o.a.createElement(ut,{onHeal:function(){return f({mode:"heal",turn:v})},onMagic:function(){return f({mode:"magic",turn:v})},onAttack:function(){return f({mode:"attack",turn:v})}})))))})),xt=n(60),jt=n.n(xt);var Et={onGameEnd:D,setContents:me},Ot=Object(l.b)((function(e){return{mode:e.gameStatus.mode}}),Et)((function(e){var t=e.mode,n=e.onGameEnd,a=e.setContents,r=t;return o.a.createElement(o.a.Fragment,null,o.a.createElement("header",null),o.a.createElement("main",{className:"content"},o.a.createElement(Xe,null),o.a.createElement(o.a.Fragment,null,o.a.createElement(k,null),o.a.createElement("div",{id:"stage",style:{width:544,height:480,backgroundImage:Ae.a}},o.a.createElement(ye,null,o.a.createElement(Ke,null)))),"start"===r?o.a.createElement("div",{className:Re.a.gameOverContainer},o.a.createElement("div",{className:Re.a.gameOver},"~~The Rescue~~"),o.a.createElement("div",{className:Re.a.startGameButtonContainer},o.a.createElement("span",{className:Re.a.startGameButton,onClick:function(){n({mode:"world",winner:void 0,selectedOpponentIdx:0})}},"Start")),o.a.createElement("div",null,"Instructions:",o.a.createElement("ul",null,o.a.createElement("li",null,"use ",o.a.createElement("kbd",null,"W"),", ",o.a.createElement("kbd",null,"A"),", ",o.a.createElement("kbd",null,"S"),", ",o.a.createElement("kbd",null,"D")," to navigate"),o.a.createElement("li",null,"use ",o.a.createElement("kbd",null,"Enter")," and ",o.a.createElement("kbd",null,"Mouse")," to cause events")))):"","battle"===r?o.a.createElement(wt,null):"","game-over"===r?o.a.createElement("div",{className:Re.a.gameOverContainer},o.a.createElement("div",{className:Re.a.gameOver},"Game Over")):"","game-won"===r?o.a.createElement("div",{className:Re.a.gameOverContainer},o.a.createElement("div",{className:Re.a.gameOver},"Victory!!",o.a.createElement("br",null),"You finished the game!"),o.a.createElement("div",{className:Re.a.startGameButtonContainer},o.a.createElement("span",{className:Re.a.startGameButton,onClick:function(){a({open:!0,title:"Please be my Valentine forever!!!",text:jt.a,openerId:"",action:"video"})}},"Open Reward"))):""),o.a.createElement("footer",null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _t=n(20),kt=Object(_t.b)({mapImagesLoaded:je,gameStatus:Y,character:O,npc:ae,objectNPC:le,dialog:pe}),It=Object(i.a)({reducer:kt});c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,{store:It},o.a.createElement(Ot,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.662eb3b3.chunk.js.map